(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{105:(e,r,a)=>{Promise.resolve().then(a.bind(a,4169))},2714:(e,r,a)=>{"use strict";a.d(r,{J:()=>d});var s=a(5155),t=a(2115),i=a(968),o=a(2085),l=a(3999);let n=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(i.b,{ref:r,className:(0,l.cn)(n(),a),...t})});d.displayName=i.b.displayName},3580:(e,r,a)=>{"use strict";a.d(r,{dj:()=>u});var s=a(2115);let t=0,i=new Map,o=e=>{if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,r)},l=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=r;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},n=[],d={toasts:[]};function c(e){d=l(d,e),n.forEach(e=>{e(d)})}function m(e){let{...r}=e,a=(t=(t+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...r,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,r]=s.useState(d);return s.useEffect(()=>(n.push(r),()=>{let e=n.indexOf(r);e>-1&&n.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},3999:(e,r,a)=>{"use strict";a.d(r,{cn:()=>i});var s=a(2596),t=a(9688);function i(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,t.QP)((0,s.$)(r))}},4169:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>U});var s=a(5155),t=a(2115),i=a(5695),o=a(6766),l=a(4213),n=a(9803),d=a(9869),c=a(4616),m=a(6287),u=a(2525),p=a(7168),f=a(8482),x=a(9852),h=a(2714),g=a(9474),v=a(3580),j=a(3803),y=a(3999);let N=j.bL,b=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(j.B8,{ref:r,className:(0,y.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...t})});b.displayName=j.B8.displayName;let w=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(j.l9,{ref:r,className:(0,y.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...t})});w.displayName=j.l9.displayName;let E=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(j.UC,{ref:r,className:(0,y.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...t})});E.displayName=j.UC.displayName;var k=a(8145),C=a(1260),S=a(4416);let T=C.bL,R=C.l9,A=C.ZL;C.bm;let D=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(C.hJ,{ref:r,className:(0,y.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t})});D.displayName=C.hJ.displayName;let F=t.forwardRef((e,r)=>{let{className:a,children:t,...i}=e;return(0,s.jsxs)(A,{children:[(0,s.jsx)(D,{}),(0,s.jsxs)(C.UC,{ref:r,className:(0,y.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[t,(0,s.jsxs)(C.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(S.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});F.displayName=C.UC.displayName;let O=e=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:(0,y.cn)("flex flex-col space-y-1.5 text-center sm:text-left",r),...a})};O.displayName="DialogHeader";let P=e=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:(0,y.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...a})};P.displayName="DialogFooter";let J=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(C.hE,{ref:r,className:(0,y.cn)("text-lg font-semibold leading-none tracking-tight",a),...t})});J.displayName=C.hE.displayName;let _=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(C.VY,{ref:r,className:(0,y.cn)("text-sm text-muted-foreground",a),...t})});_.displayName=C.VY.displayName;var I=a(6559),z=a(2486),M=a(1497),V=a(9663),L=a(6891);let q=[{id:1,productId:1,productName:"L\xe1mpara Vintage",lastMessage:"S\xed, todav\xeda est\xe1 disponible. \xbfEst\xe1s interesado?",timestamp:"2023-05-01T14:35:00",unread:!1,messages:[{id:1,sender:"user",name:"Carlos",message:"\xbfTodav\xeda est\xe1 disponible?",timestamp:"2023-05-01T14:30:00"},{id:2,sender:"seller",name:"Vendedor",message:"S\xed, todav\xeda est\xe1 disponible. \xbfEst\xe1s interesado?",timestamp:"2023-05-01T14:35:00"}]},{id:2,productId:2,productName:"Silla de Dise\xf1ador",lastMessage:"\xbfPuedes enviar m\xe1s fotos de la silla?",timestamp:"2023-05-02T10:15:00",unread:!0,messages:[{id:1,sender:"user",name:"Mar\xeda",message:"\xbfPuedes enviar m\xe1s fotos de la silla?",timestamp:"2023-05-02T10:15:00"}]},{id:3,productId:3,productName:"Mesa de Centro",lastMessage:"\xbfCu\xe1les son las dimensiones exactas?",timestamp:"2023-05-03T16:20:00",unread:!0,messages:[{id:1,sender:"user",name:"Juan",message:"\xbfCu\xe1les son las dimensiones exactas?",timestamp:"2023-05-03T16:20:00"}]}];function Z(){let[e,r]=(0,t.useState)(q),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(""),{toast:n}=(0,v.dj)(),d=a=>{a.unread&&r(e.map(e=>e.id===a.id?{...e,unread:!1}:e)),i(a)};return(0,s.jsxs)("div",{className:"flex h-[600px] border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-1/3 border-r",children:[(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsx)("h3",{className:"font-medium",children:"Conversaciones"})}),(0,s.jsx)(L.F,{className:"h-[calc(600px-57px)]",children:e.map(e=>(0,s.jsxs)("div",{className:"p-4 border-b cursor-pointer hover:bg-gray-50 transition-colors ".concat((null==a?void 0:a.id)===e.id?"bg-gray-100":""),onClick:()=>d(e),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,s.jsx)("h4",{className:"font-medium truncate",children:e.productName}),(0,s.jsxs)("div",{className:"flex items-center",children:[e.unread&&(0,s.jsx)("span",{className:"w-2 h-2 bg-primary rounded-full mr-2"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleDateString()})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.lastMessage})]},e.id))})]}),(0,s.jsx)("div",{className:"flex-1 flex flex-col",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsx)("h3",{className:"font-medium",children:a.productName})}),(0,s.jsx)(L.F,{className:"flex-1 p-4",children:(0,s.jsx)("div",{className:"space-y-4",children:a.messages.map(e=>(0,s.jsxs)("div",{className:"flex items-start gap-2 ".concat("seller"===e.sender?"justify-end":"justify-start"),children:["user"===e.sender&&(0,s.jsx)(V.eu,{className:"h-8 w-8",children:(0,s.jsx)(V.q5,{children:e.name.charAt(0)})}),(0,s.jsxs)("div",{className:"max-w-[80%] rounded-lg px-4 py-2 ".concat("seller"===e.sender?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center gap-4 mb-1",children:[(0,s.jsx)("span",{className:"font-medium text-xs",children:e.name}),(0,s.jsx)("span",{className:"text-xs opacity-70",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsx)("p",{children:e.message})]}),"seller"===e.sender&&(0,s.jsx)(V.eu,{className:"h-8 w-8",children:(0,s.jsx)(V.q5,{className:"bg-primary/10 text-primary",children:"VD"})})]},e.id))})}),(0,s.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),!o.trim()||!a)return;let t={id:a.messages.length+1,sender:"seller",name:"Vendedor",message:o.trim(),timestamp:new Date().toISOString()},d=[...a.messages,t],c={...a,messages:d,lastMessage:o.trim(),timestamp:new Date().toISOString()};r(e.map(e=>e.id===a.id?c:e)),i(c),l(""),n({title:"Mensaje enviado",description:"Tu respuesta ha sido enviada al cliente"})},className:"border-t p-4 flex gap-2",children:[(0,s.jsx)(x.p,{type:"text",placeholder:"Escribe tu respuesta...",value:o,onChange:e=>l(e.target.value),className:"flex-1"}),(0,s.jsxs)(p.$,{type:"submit",size:"icon",children:[(0,s.jsx)(z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Enviar mensaje"})]})]})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[(0,s.jsx)(M.A,{className:"h-12 w-12 mb-4 opacity-20"}),(0,s.jsx)("p",{children:"Selecciona una conversaci\xf3n para ver los mensajes"})]})})]})}var $=a(9699);function U(){let e=(0,i.useRouter)(),{toast:r}=(0,v.dj)(),{products:a,loading:j,error:y,refreshProducts:C}=(0,$.Q)(),[S,A]=(0,t.useState)(null),[D,z]=(0,t.useState)({name:"",price:"",description:"",category:"",stock:"",image:"/placeholder.svg"}),[M,V]=(0,t.useState)(null),L=e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){let e=new FileReader;e.onload=()=>{"string"==typeof e.result&&(V(e.result),S?A({...S,imagen:e.result}):z({...D,image:e.result}))},e.onerror=()=>{r({title:"Error",description:"No se pudo leer el archivo",variant:"destructive"})},e.readAsDataURL(s)}},q=async e=>{if(e.preventDefault(),!D.name||!D.price||!D.category){r({title:"Error",description:"Por favor completa todos los campos requeridos",variant:"destructive"});return}try{let e=parseFloat(D.price),a=parseInt(D.stock)||0;if(isNaN(e)||e<0){r({title:"Error",description:"El precio debe ser un n\xfamero v\xe1lido y positivo",variant:"destructive"});return}let s=await fetch("/api/productos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:D.name,descripcion:D.description,precio:e,categoria:D.category,stock:a,imagen:D.image})});if(!s.ok){let e=await s.json();throw Error(e.error||"Error al crear el producto")}await C(),z({name:"",price:"",description:"",category:"",stock:"",image:"/placeholder.svg"}),V(null),r({title:"\xc9xito",description:"El producto ha sido agregado exitosamente"})}catch(e){console.error("Error:",e),r({title:"Error",description:e instanceof Error?e.message:"Error al crear el producto",variant:"destructive"})}},U=async e=>{if(e.preventDefault(),S)try{let e=await fetch("/api/productos?id=".concat(S.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:S.nombre,descripcion:S.descripcion,precio:S.precio,categoria:S.categoria,stock:S.stock,imagen:S.imagen})});if(!e.ok){let r=await e.json();throw Error(r.error||"Error al actualizar el producto")}await C(),A(null),r({title:"\xc9xito",description:"El producto ha sido actualizado exitosamente"})}catch(e){console.error("Error:",e),r({title:"Error",description:e instanceof Error?e.message:"Error al actualizar el producto",variant:"destructive"})}},B=async e=>{if(e)try{if(!(await fetch("/api/productos?id=".concat(e),{method:"DELETE"})).ok)throw Error("Error al eliminar el producto");await C(),r({title:"Producto eliminado",description:"El producto ha sido eliminado exitosamente"})}catch(e){console.error("Error:",e),r({title:"Error",description:"Hubo un error al eliminar el producto",variant:"destructive"})}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("header",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Panel de Administraci\xf3n"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Gestiona los productos de tu tienda"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)(p.$,{variant:"outline",onClick:()=>e.push("/admin/database"),children:[(0,s.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Base de Datos"]}),(0,s.jsxs)(p.$,{variant:"outline",onClick:()=>e.push("/admin/videos"),children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Videos"]})]})]}),(0,s.jsxs)(N,{defaultValue:"products",children:[(0,s.jsxs)(b,{className:"mb-4",children:[(0,s.jsxs)(w,{value:"products",children:["Productos",(0,s.jsx)(k.E,{variant:"secondary",className:"ml-2",children:(null==a?void 0:a.length)||0})]}),(0,s.jsxs)(w,{value:"messages",children:["Mensajes",(0,s.jsx)(k.E,{variant:"secondary",className:"ml-2",children:"0"})]})]}),(0,s.jsx)(E,{value:"products",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-8",children:[(0,s.jsxs)(f.Zp,{className:"md:col-span-1",children:[(0,s.jsxs)(f.aR,{children:[(0,s.jsx)(f.ZB,{children:"Agregar Nuevo Producto"}),(0,s.jsx)(f.BT,{children:"Completa el formulario para agregar un nuevo producto"})]}),(0,s.jsx)(f.Wu,{children:(0,s.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"name",children:"Nombre del producto"}),(0,s.jsx)(x.p,{id:"name",name:"name",value:D.name,onChange:e=>z({...D,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"price",children:"Precio"}),(0,s.jsx)(x.p,{id:"price",name:"price",type:"number",step:"0.01",value:D.price,onChange:e=>z({...D,price:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"stock",children:"Stock"}),(0,s.jsx)(x.p,{id:"stock",name:"stock",type:"number",value:D.stock,onChange:e=>z({...D,stock:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"category",children:"Categor\xeda"}),(0,s.jsx)(x.p,{id:"category",name:"category",value:D.category,onChange:e=>z({...D,category:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"description",children:"Descripci\xf3n"}),(0,s.jsx)(g.T,{id:"description",name:"description",value:D.description,onChange:e=>z({...D,description:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{children:"Imagen"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"relative h-20 w-20 overflow-hidden rounded-md border",children:(0,s.jsx)(o.default,{src:M||D.image,alt:"Vista previa",fill:!0,className:"object-cover"})}),(0,s.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-md border px-3 py-2 text-sm",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Subir imagen"})]}),(0,s.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:L,className:"sr-only"})]})]})]}),(0,s.jsxs)(p.$,{type:"submit",className:"w-full",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Agregar Producto"]})]})})]}),(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsxs)(f.Zp,{children:[(0,s.jsxs)(f.aR,{children:[(0,s.jsx)(f.ZB,{children:"Productos Actuales"}),(0,s.jsx)(f.BT,{children:"Administra los productos de tu tienda"})]}),(0,s.jsx)(f.Wu,{children:(0,s.jsx)("div",{className:"space-y-4",children:j?(0,s.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0].map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg border",children:[(0,s.jsx)("div",{className:"h-16 w-16 bg-gray-200 rounded-md"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},r))}):y?(0,s.jsxs)("div",{className:"text-center text-red-500 py-8",children:["Error al cargar los productos: ",y]}):0===a.length?(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No hay productos disponibles"}):a.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg border",children:[(0,s.jsx)("div",{className:"relative h-16 w-16 overflow-hidden rounded-md flex-shrink-0",children:(0,s.jsx)(o.default,{src:e.imagen||"/placeholder.svg",alt:e.nombre,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:e.nombre}),(0,s.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.descripcion}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",e.precio.toFixed(2)]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["Stock: ",e.stock]}),(0,s.jsx)(k.E,{variant:"secondary",children:e.categoria})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(T,{children:[(0,s.jsx)(R,{asChild:!0,children:(0,s.jsxs)(p.$,{variant:"ghost",size:"icon",className:"text-blue-500 hover:text-blue-700 hover:bg-blue-50",onClick:()=>A(e),children:[(0,s.jsx)(m.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Editar"})]})}),(0,s.jsxs)(F,{children:[(0,s.jsxs)(O,{children:[(0,s.jsx)(J,{children:"Editar Producto"}),(0,s.jsx)(_,{children:"Modifica los detalles del producto y guarda los cambios."})]}),S&&(0,s.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"edit-name",children:"Nombre"}),(0,s.jsx)(x.p,{id:"edit-name",value:S.nombre,onChange:e=>A({...S,nombre:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"edit-price",children:"Precio"}),(0,s.jsx)(x.p,{id:"edit-price",type:"number",step:"0.01",value:S.precio,onChange:e=>A({...S,precio:parseFloat(e.target.value)}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"edit-stock",children:"Stock"}),(0,s.jsx)(x.p,{id:"edit-stock",type:"number",value:S.stock,onChange:e=>A({...S,stock:parseInt(e.target.value)}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"edit-category",children:"Categor\xeda"}),(0,s.jsx)(x.p,{id:"edit-category",value:S.categoria,onChange:e=>A({...S,categoria:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{htmlFor:"edit-description",children:"Descripci\xf3n"}),(0,s.jsx)(g.T,{id:"edit-description",value:S.descripcion,onChange:e=>A({...S,descripcion:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h.J,{children:"Imagen"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"relative h-20 w-20 overflow-hidden rounded-md border",children:(0,s.jsx)(o.default,{src:S.imagen||"/placeholder.svg",alt:"Vista previa",fill:!0,className:"object-cover"})}),(0,s.jsxs)("label",{htmlFor:"edit-image-upload",className:"cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-md border px-3 py-2 text-sm",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Cambiar imagen"})]}),(0,s.jsx)("input",{id:"edit-image-upload",type:"file",accept:"image/*",onChange:L,className:"sr-only"})]})]})]}),(0,s.jsx)(P,{children:(0,s.jsx)(p.$,{type:"submit",children:"Guardar cambios"})})]})]})]}),(0,s.jsxs)(I.Lt,{children:[(0,s.jsx)(I.tv,{asChild:!0,children:(0,s.jsxs)(p.$,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:[(0,s.jsx)(u.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Eliminar"})]})}),(0,s.jsxs)(I.EO,{children:[(0,s.jsxs)(I.wd,{children:[(0,s.jsx)(I.r7,{children:"\xbfEst\xe1 seguro que desea eliminar este producto?"}),(0,s.jsx)(I.$v,{children:"Esta acci\xf3n no se puede deshacer y eliminar\xe1 permanentemente el producto de la base de datos."})]}),(0,s.jsxs)(I.ck,{children:[(0,s.jsx)(I.Zr,{children:"Cancelar"}),(0,s.jsx)(I.Rx,{onClick:()=>B(e.id),children:"Eliminar"})]})]})]})]})]},e.id))})})]})})]})}),(0,s.jsx)(E,{value:"messages",children:(0,s.jsx)(Z,{})})]})]})})}},6559:(e,r,a)=>{"use strict";a.d(r,{$v:()=>h,EO:()=>u,Lt:()=>n,Rx:()=>g,Zr:()=>v,ck:()=>f,r7:()=>x,tv:()=>d,wd:()=>p});var s=a(5155),t=a(2115),i=a(7649),o=a(3999),l=a(7168);let n=i.bL,d=i.l9,c=i.ZL,m=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(i.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:r})});m.displayName=i.hJ.displayName;let u=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(i.UC,{ref:r,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t})]})});u.displayName=i.UC.displayName;let p=e=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",r),...a})};p.displayName="AlertDialogHeader";let f=e=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...a})};f.displayName="AlertDialogFooter";let x=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(i.hE,{ref:r,className:(0,o.cn)("text-lg font-semibold",a),...t})});x.displayName=i.hE.displayName;let h=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(i.VY,{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",a),...t})});h.displayName=i.VY.displayName;let g=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(i.rc,{ref:r,className:(0,o.cn)((0,l.r)(),a),...t})});g.displayName=i.rc.displayName;let v=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(i.ZD,{ref:r,className:(0,o.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...t})});v.displayName=i.ZD.displayName},6891:(e,r,a)=>{"use strict";a.d(r,{F:()=>l});var s=a(5155),t=a(2115),i=a(3998),o=a(3999);let l=t.forwardRef((e,r)=>{let{className:a,children:t,...l}=e;return(0,s.jsxs)(i.bL,{ref:r,className:(0,o.cn)("relative overflow-hidden",a),...l,children:[(0,s.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(n,{}),(0,s.jsx)(i.OK,{})]})});l.displayName=i.bL.displayName;let n=t.forwardRef((e,r)=>{let{className:a,orientation:t="vertical",...l}=e;return(0,s.jsx)(i.VM,{ref:r,orientation:t,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 border-t border-t-transparent p-[1px]",a),...l,children:(0,s.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});n.displayName=i.VM.displayName},7168:(e,r,a)=>{"use strict";a.d(r,{$:()=>d,r:()=>n});var s=a(5155),t=a(2115),i=a(9708),o=a(2085),l=a(3999);let n=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,r)=>{let{className:a,variant:t,size:o,asChild:d=!1,...c}=e,m=d?i.DX:"button";return(0,s.jsx)(m,{className:(0,l.cn)(n({variant:t,size:o,className:a})),ref:r,...c})});d.displayName="Button"},8145:(e,r,a)=>{"use strict";a.d(r,{E:()=>l});var s=a(5155),t=a(2085),i=a(3999);let o=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:a,...t}=e;return(0,s.jsx)("div",{className:(0,i.cn)(o({variant:a}),r),...t})}},8482:(e,r,a)=>{"use strict";a.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>n,Zp:()=>o,aR:()=>l,wL:()=>m});var s=a(5155),t=a(2115),i=a(3999);let o=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});o.displayName="Card";let l=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...t})});l.displayName="CardHeader";let n=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});n.displayName="CardTitle";let d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",a),...t})});d.displayName="CardDescription";let c=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",a),...t})});c.displayName="CardContent";let m=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",a),...t})});m.displayName="CardFooter"},9474:(e,r,a)=>{"use strict";a.d(r,{T:()=>o});var s=a(5155),t=a(2115),i=a(3999);let o=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...t})});o.displayName="Textarea"},9663:(e,r,a)=>{"use strict";a.d(r,{eu:()=>l,q5:()=>n});var s=a(5155),t=a(2115),i=a(5977),o=a(3999);let l=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(i.bL,{ref:r,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t})});l.displayName=i.bL.displayName,t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(i._V,{ref:r,className:(0,o.cn)("aspect-square h-full w-full",a),...t})}).displayName=i._V.displayName;let n=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(i.H4,{ref:r,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t})});n.displayName=i.H4.displayName},9699:(e,r,a)=>{"use strict";a.d(r,{Q:()=>l,default:()=>n});var s=a(5155),t=a(2115),i=a(3580);let o=(0,t.createContext)(void 0);function l(){let e=(0,t.useContext)(o);if(!e)throw Error("useProducts debe usarse dentro de un ProductsProvider");return e}function n(e){let{children:r}=e,[a,l]=(0,t.useState)([]),[n,d]=(0,t.useState)(!0),[c,m]=(0,t.useState)(null),[u,p]=(0,t.useState)(0),{toast:f}=(0,i.dj)(),x=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{d(!0),m(null);let e=await fetch("/api/productos");if(!e.ok)throw Error("Error al cargar productos: ".concat(e.status," ").concat(e.statusText));let r=await e.json();if(!Array.isArray(r))throw Error("El formato de datos recibido no es v\xe1lido");let a=r.filter(y);l(a),p(0)}catch(r){console.error("Error al cargar productos:",r),m(r instanceof Error?r.message:"Error desconocido"),e<3?setTimeout(()=>{p(e+1),x(e+1)},2e3):f({title:"Error",description:"No se pudieron cargar los productos despu\xe9s de varios intentos. Por favor, recarga la p\xe1gina.",variant:"destructive"})}finally{u===e&&d(!1)}},[f]),h=async e=>{try{let r=await fetch("/api/productos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();throw Error(e.error||"Error al crear el producto")}let a=await r.json();return l(e=>[...e,a]),a}catch(e){throw console.error("Error al a\xf1adir producto:",e),e}},g=async(e,r)=>{try{let a=await fetch("/api/productos?id=".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok){let e=await a.json();throw Error(e.error||"Error al actualizar el producto")}let s=await a.json();return l(r=>r.map(r=>r.id===e?s:r)),s}catch(e){throw console.error("Error al actualizar producto:",e),e}},v=async e=>{try{let r=await fetch("/api/productos?id=".concat(e),{method:"DELETE"});if(!r.ok){let e=await r.json();throw Error(e.error||"Error al eliminar el producto")}l(r=>r.filter(r=>r.id!==e))}catch(e){throw console.error("Error al eliminar producto:",e),e}},j=async e=>{try{let r=await fetch("/api/productos?id=".concat(e));if(!r.ok){let e=await r.json();throw Error(e.error||"Error al obtener el producto")}return await r.json()}catch(e){throw console.error("Error al obtener producto:",e),e}},y=e=>"string"==typeof e.id&&"string"==typeof e.nombre&&"string"==typeof e.descripcion&&"number"==typeof e.precio&&"number"==typeof e.stock&&"string"==typeof e.categoria&&"string"==typeof e.imagen;return(0,t.useEffect)(()=>{x()},[x]),(0,s.jsx)(o.Provider,{value:{products:a,loading:n,error:c,refreshProducts:()=>x(0),addProduct:h,updateProduct:g,deleteProduct:v,getProduct:j},children:r})}},9852:(e,r,a)=>{"use strict";a.d(r,{p:()=>o});var s=a(5155),t=a(2115),i=a(3999);let o=t.forwardRef((e,r)=>{let{className:a,type:t,...o}=e;return(0,s.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...o})});o.displayName="Input"}},e=>{var r=r=>e(e.s=r);e.O(0,[352,687,998,756,797,297,580,441,684,358],()=>r(105)),_N_E=e.O()}]);